<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">src/meshes/model/CPlanarLaserScan.js | mrpt-web-js</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="JavaScript Library containing websocket server connection modules and 2d and 3d visualisation modules."><meta property="twitter:card" content="summary"><meta property="twitter:title" content="mrpt-web-js"><meta property="twitter:description" content="JavaScript Library containing websocket server connection modules and 2d and 3d visualisation modules."></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MRPTLIB">MRPTLIB</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#core">core</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/Message.js~Message.html">Message</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/Param.js~Param.html">Param</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/Service.js~Service.html">Service</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/ServiceRequest.js~ServiceRequest.html">ServiceRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/ServiceResponse.js~ServiceReponse.html">ServiceReponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/Topic.js~Topic.html">Topic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/WS.js~WS.html">WS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/socketAdapter.js~SocketAdapter.html">SocketAdapter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-EventEmitter2">EventEmitter2</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#math">math</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/math/Pose.js~Pose.html">Pose</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/math/Quaternion.js~Quaternion.html">Quaternion</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/math/Transform.js~Transform.html">Transform</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/math/Vector3.js~Vector3.html">Vector3</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#meshes-material">meshes/material</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meshes/material/Material.js~Material.html">Material</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#meshes-model">meshes/model</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meshes/model/Arrow.js~Arrow.html">Arrow</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meshes/model/CCylinder.js~CCylinder.html">CCylinder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meshes/model/COccupancyGrid.js~COccupancyGrid.html">COccupancyGrid</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meshes/model/CPlanarLaserScan.js~CPlanarLaserScan.html">CPlanarLaserScan</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meshes/model/CPointCloud.js~CPointCloud.html">CPointCloud</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meshes/model/CPolyhedron.js~CPolyhedron.html">CPolyhedron</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meshes/model/CornerXYZ.js~CornerXYZ.html">CornerXYZ</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meshes/model/CornerXYZSimple.js~CornerXYZSimple.html">CornerXYZSimple</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meshes/model/CubeMarker.js~CubeMarker.html">CubeMarker</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meshes/model/Path.js~Path.html">Path</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meshes/model/SphereMarker.js~SphereMarker.html">SphereMarker</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#meshes-scene">meshes/scene</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meshes/scene/Scene.js~Scene.html">Scene</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#plots">plots</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plots/CartesianPlane.js~CartesianPlane.html">CartesianPlane</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/meshes/model/CPlanarLaserScan.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import * as THREE from &apos;three&apos;
export default class CPlanarLaserScan extends THREE.Group {
  /**
   *
   * @param {Object} options - with the following keys
   * @param n - the number of points
   * @param xs - array containing the x coords of points
   * @param ys - arrau containing the y coords of points
   * @param zs - array containing the z coords of points
   * @param enable_line - boolean to enable line in the planar scan
   * @param enable_points - boolean to enable points in the planar scan
   * @param enable_surface - boolean to enable surface in the planar scan
   * @param line_width - default: 1, set the line width
   * @param points_width - default: 1, set the points width
   * @param line_color - default: {r:1.0,g:0.0,b:0.0,a:0.5}, set the line color
   * @param points_color - default: {r:1.0,g:0,b:0,a:1}, set the points color
   * @param surface_color - default: {r:0.01,g:0.01,b:0.6,a:0.6}, set the surface color
   *                        and transparency
   */
  constructor(options={}) {
    super();
    this.xs = options.xs || [];
    this.ys = options.ys || [];
    this.zs = options.zs || [];
    this.n = Math.max(this.xs.length, this.ys.length, this.zs.length);
    this.enable_line = true;
    this.enable_points = true;
    this.enable_surface = true;
    this.line_width = 1;
    this.points_width = 0.05;
    this.line_color = {r:1.0,g:0.0,b:0.0,a:0.6};
    this.points_color = {r:1.0,g:1,b:0,a:1};
    this.surface_color = {r:0.01,g:0.01,b:0.6,a:0.3};
    this.setConfiguration(options, false);
    this.render();
  }
  /**
   * The functions renders the planar scan
   * based on the parameters and configurations currenltly
   * set
   */
  render()
  {
    let n = this.n;
    // LINES
    if ( n &gt; 1 &amp;&amp; this.enable_line)
    {
      let geometry = new THREE.Geometry();
      let color = new THREE.Color();
      let c = this.line_color;
      color.setRGB(c.r,c.g,c.b);
      let material = new THREE.LineBasicMaterial({
        color: color,
        linewidth: this.line_width,
      });
      for (let i = 0; i &lt; n; i++)
      {
        geometry.vertices.push(
          new THREE.Vector3((this.xs[i] || 0), (this.ys[i] || 0), (this.zs[i] || 0))
        );
      }
      if (this.line_scan !== undefined)
      {
        this.remove(this.line_scan);
      }
      this.line_scan = new THREE.Line(geometry, material);
      this.add(this.line_scan);
    }
    // POINTS
    if ( n &gt; 0 &amp;&amp; this.enable_points)
    {
      let geometry = new THREE.Geometry();
      let color = new THREE.Color();
      let c = this.points_color;
      color.setRGB(c.r,c.g,c.b);
      let material = new THREE.PointsMaterial({
        color: color,
        size: this.points_width,
        opacity: this.points_color.a
      });
      for (let i = 0; i &lt; n; i++)
      {
        geometry.vertices.push(
          new THREE.Vector3((this.xs[i] || 0), (this.ys[i] || 0), (this.zs[i] || 0))
        );
      }
      if (this.points_scan !== undefined)
      {
        this.remove(this.points_scan);
      }
      this.points_scan = new THREE.Points(geometry, material);
      this.add(this.points_scan);
    }
    // SURFACE
    if ( n &gt; 2 &amp;&amp; this.enable_surface)
    {
      let geometry = new THREE.Geometry();
      let color = new THREE.Color();
      let c = this.surface_color;
      color.setRGB(c.r,c.g,c.b);
      let material = new THREE.MeshBasicMaterial({
        color: color,
        opacity: this.surface_color.a
      })
      for (let i = 0; i &lt; n; i++)
      {
        geometry.vertices.push(
          new THREE.Vector3((this.xs[i] || 0), (this.ys[i] || 0), (this.zs[i] || 0))
        );
      }
      geometry.vertices.push(
        new THREE.Vector3((this.xs[0] || 0), (this.ys[0] || 0), (this.zs[0] || 0))
      );
      for (let i = 1; i &lt; n-1; i++)
      {
        geometry.faces.push(new THREE.Face3(0, i, i+1));
      }
      // geometry.computeFaceNormals();
      // geometry.computeVertexNormals();
      if (this.surface_scan !== undefined)
      {
        this.remove(this.surface_scan);
      }
      this.surface_scan = new THREE.Mesh(geometry, material);
      this.add(this.surface_scan);
    }
  }
  /**
   *
   * @param {*} options  - options contain the parameters (points)
   *    and configurations (line_width, points_color,enable_line)
   * @param {boolean} isRender - default true,
   *    will render the object after setting the options
   * @param n - the number of points
   * @param xs - array containing the x coords of points
   * @param ys - arrau containing the y coords of points
   * @param zs - array containing the z coords of points
   */
  setAll(options, isRender = true)
  {
    this.setParameters(options, false);
    this.setConfiguration(options, false);
    if (isRender) {
      this.render();
    }
  }
  /**
   * @param {boolean} isRender - default true,
   *    will render the object after setting the options
   * @param {Object} options - with the following keys
   *
   */
  setParameters(options, isRender = true)
  {
    this.xs = options.xs || [];
    this.ys = options.ys || [];
    this.zs = options.zs || [];
    this.n = Math.max(this.xs.length, this.ys.length, this.zs.length);
    console.log(&quot;n&quot;,this.n, &quot;options&quot;, options);
    if (isRender) {
      this.render();
    }
  }
  /**
   * @param {boolean} isRender - default true,
   *    will render the object after setting the options
   * @param {*} options - with the following keys
   * @param enable_line - boolean to enable line in the planar scan
   * @param enable_points - boolean to enable points in the planar scan
   * @param enable_surface - boolean to enable surface in the planar scan
   * @param line_width - default: 1, set the line width
   * @param points_width - default: 1, set the points width
   * @param line_color - default: {r:1.0,g:0.0,b:0.0,a:0.5}, set the line color
   * @param points_color - default: {r:1.0,g:0,b:0,a:1}, set the points color
   * @param surface_color - default: {r:0.01,g:0.01,b:0.6,a:0.6}, set the surface color
   *                        and transparency
   */
  setConfiguration(options, isRender = true)
  {
    // color and width configurations with default values
    if(options.enable_line !== undefined)
    {
      this.enable_line = options.enable_line;
    }
    if(options.enable_points !== undefined)
    {
      this.enable_points = options.enable_points;
    }
    if(options.enable_surface !== undefined)
    {
      this.enable_surface = options.enable_surface;
    }
    this.line_width = options.line_width || this.line_width;
    this.points_width = options.points_width || this.points_width;
    this.line_color = options.line_color || this.line_color;
    this.points_color = options.points_color || this.points_color;
    this.surface_color = options.surface_color || this.surface_color;
    if (isRender) {
      this.render();
    }
  }
  /**
   *
   * @param {Object} message - with the following keys
   * @param n - the number of points
   * @param xs - array containing the x coords of points
   * @param ys - arrau containing the y coords of points
   * @param zs - array containing the z coords of points
   * @param enable_line - boolean to enable line in the planar scan
   * @param enable_points - boolean to enable points in the planar scan
   * @param enable_surface - boolean to enable surface in the planar scan
   * @param line_width - default: 1, set the line width
   * @param points_width - default: 1, set the points width
   * @param line_color - default: {r:1.0,g:0.0,b:0.0,a:0.5}, set the line color
   * @param points_color - default: {r:1.0,g:0,b:0,a:1}, set the points color
   * @param surface_color - default: {r:0.01,g:0.01,b:0.6,a:0.6}, set the surface color
   *                        and transparency
   * if n is set as negative then the arrays xs,ys,zs of the object
   * remain unchanged
   */
  processMessage(message, isRender = true)
  {
    this.setAll(message, isRender);
  }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
